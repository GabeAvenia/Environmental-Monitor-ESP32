@startuml
hide footbox
mainframe **cd** UC3: Configuring Environmental Monitor
skinparam sequenceMessageAlign center

actor "Test Engineer" as Engineer
participant "LabVIEW" as LabVIEW
participant "Environmental Monitor" as Board
participant "Non-Volatile\nMemory" as Storage
participant "Peripherals" as Peripherals

Engineer -> LabVIEW: Set Board ID.vi
LabVIEW -> Board: ~SYST:CONF:BOARD:ID <id>
Board -> Storage: Save Board ID
Board -> LabVIEW: Confirmation

Engineer -> LabVIEW: Set Peripherals Configuration.vi
note right
  Configure peripherals with:
  - Name/identifier
  - Type (SHT41, Si7021, PT100)
  - Address or pin
  - Interface (I2C or SPI)
  - Polling rate
end note
LabVIEW -> Board: ~SYST:CONF:SENS:UPDATE <json>
Board -> Board: Validate Config
Board -> Peripherals: Initialize with new config
Peripherals -> Board: Connection status
alt Valid Configuration
  Board -> Storage: Save Sensor Config
  Board -> LabVIEW: Success
else Invalid Configuration
  Board -> LabVIEW: Validation Error
  LabVIEW -> Engineer: Show Error
end

Engineer -> LabVIEW: Set Additional Configuration.vi
LabVIEW -> Board: ~SYST:CONF:ADD:UPDATE <json>
Board -> Storage: Save Additional Config
Board -> LabVIEW: Confirmation

Engineer -> LabVIEW: Get Configuration.vi
LabVIEW -> Board: ~SYST:CONF?
Board -> Storage: Read Configuration
Storage -> Board: Current Config
Board -> LabVIEW: Configuration (JSON)
LabVIEW -> Engineer: Display Configuration

@enduml